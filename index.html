<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>School Press Club</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>ðŸ“° School Press Club</h1>
    </header>

    <!-- Latest Issue Section (Auto-loaded) -->
    <section id="latest-issue">
        <h2>Latest Issue: <span id="latest-title">Loading...</span></h2>
        <div id="latest-pdf-container">
            <iframe id="latest-pdf" width="100%" height="500px" frameborder="0"></iframe>
        </div>
    </section>

    <!-- Join Form -->
    <section class="form-section">
        <h2>Join the Club</h2>
        <form action="https://formsubmit.co/jasper.swingler@student.education.wa.edu.au" method="POST">
            <input type="text" name="name" placeholder="Your Name" required>
            <input type="email" name="email" placeholder="Your Email" required>
            <input type="hidden" name="_next" value="https://yourusername.github.io/thanks.html">
            <button type="submit">Submit</button>
        </form>
    </section>

    <footer>
        <a href="archive.html">View All Issues â†’</a>
    </footer>

    <!-- Fetch and display latest PDF -->
    <script>
        // Load press-data.json from OneDrive
        fetch('https://onedrive.live.com/download?resid=YOUR_JSON_FILE_ID&authkey=YOUR_AUTH_KEY')
            .then(response => response.json())
            .then(data => {
                const latest = data.pdfs.sort((a, b) => 
                    new Date(b.date) - new Date(a.date)
                )[0]; // Get newest PDF
                
                document.getElementById('latest-title').textContent = 
                    latest.name.replace('PRESS-', '').replace('.pdf', '');
                document.getElementById('latest-pdf').src = latest.embedUrl;
            });
    </script>
</body>
</html>
